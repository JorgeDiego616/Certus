{% extends "base.html" %}
{% block title %}Mi Perfil{% endblock %}

{% block content %}

<h1 class="text-4xl font-bold neon mb-8">Mi Perfil</h1>

<div class="card p-8 rounded-xl max-w-xl mx-auto">

    <h2 class="text-2xl font-bold mb-4 text-cyan-300">Editar Informaci√≥n</h2>

    <form id="perfil-form" class="space-y-5">

        <div>
            <label class="block mb-1">ID de Usuario</label>
            <input id="usuario-id" type="number" 
                   class="w-full p-2 rounded bg-black/40 border border-white/10"
                   placeholder="Ejemplo: 1" required>
        </div>

        <div>
            <label class="block mb-1">Nombre</label>
            <input id="nombre" type="text" 
                   class="w-full p-2 rounded bg-black/40 border border-white/10"
                   placeholder="Tu nuevo nombre..." required>
        </div>

        <div>
            <label class="block mb-1">Correo</label>
            <input id="correo" type="email" 
                   class="w-full p-2 rounded bg-black/40 border border-white/10"
                   placeholder="correo@example.com" required>
        </div>

        <button class="btn-space w-full py-2 rounded-lg">
            Guardar Cambios
        </button>

    </form>
</div>

<script>
const form = document.getElementById("perfil-form");

form.addEventListener("submit", async (e) => {
    e.preventDefault();

    const body = {
        id: parseInt(document.getElementById("usuario-id").value),
        nombre: document.getElementById("nombre").value,
        correo: document.getElementById("correo").value
    };

    const res = await fetch("/api/usuario/actualizar", {
        method: "POST",
        headers: {"Content-Type": "application/json"},
        body: JSON.stringify(body)
    });

    if (res.ok) {
        alert("Datos actualizados correctamente.");
    } else {
        alert("No se pudieron guardar los cambios.");
    }
});
</script>

{% endblock %}