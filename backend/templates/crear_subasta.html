<!-- crear_subasta.html -->
<h1 class="text-4xl font-bold neon mb-8">Crear nueva subasta</h1>


<div class="card p-6 rounded-xl max-w-xl">
<form id="form-subasta" class="space-y-4">
<div>
<label class="block mb-1">Título</label>
<input type="text" id="titulo" class="w-full p-2 rounded bg-black/40 border border-white/10" required>
</div>


<div>
<label class="block mb-1">Descripción</label>
<textarea id="descripcion" rows="3" class="w-full p-2 rounded bg-black/40 border border-white/10" required></textarea>
</div>


<div>
<label class="block mb-1">Precio inicial</label>
<input type="number" id="precio" min="1" step="0.01" class="w-full p-2 rounded bg-black/40 border border-white/10" required>
</div>


<div>
<label class="block mb-1">Duración (horas)</label>
<input type="number" id="duracion" min="1" value="24" class="w-full p-2 rounded bg-black/40 border border-white/10">
</div>


<button type="submit" class="w-full bg-cyan-500 hover:bg-cyan-600 text-black font-bold py-2 rounded-lg">Crear</button>
</form>
</div>


<script>
const form = document.getElementById("form-subasta");
form.addEventListener("submit", async (e) => {
e.preventDefault();


const body = {
titulo: document.getElementById("titulo").value,
descripcion: document.getElementById("descripcion").value,
precio_inicial: parseFloat(document.getElementById("precio").value),
duracion_horas: parseInt(document.getElementById("duracion").value)
};


const res = await fetch("/subastas/", {
method: "POST",
headers: { "Content-Type": "application/json" },
body: JSON.stringify(body)
});


if (res.ok) {
window.location.href = "/";
} else {
alert("Error al crear la subasta");
}
});
</script>
{% endblock %}